webpackJsonp([2,0],[function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}a(249);var r=a(167),n=s(r),i=a(307),o=s(i),l=a(305),d=s(l),u=a(271),c=s(u),p=a(273),f=s(p),m=a(279),v=s(m),h=a(274),g=s(h),b=a(275),y=s(b),w=a(278),_=s(w),C=a(277),x=s(C),P=a(287),j=s(P),D=a(286),k=s(D),E=a(282),M=s(E),N=a(281),$=s(N),L=a(303),A=s(L),O=a(1),R=s(O),S=a(284),U=s(S),T=a(280),q=s(T),F=a(272),K=s(F),Y=a(173),z=s(Y);u.Validator.extend("iso8601",z.default),u.Validator.installDateTimeValidators(R.default),n.default.use(d.default),n.default.use(o.default),n.default.use(A.default),n.default.use(c.default),n.default.component("grid",j.default),n.default.component("search",k.default),n.default.component("date-range",M.default),n.default.component("arr-length",$.default),n.default.component("messages",U.default),n.default.component("chart",K.default);var Q=new d.default({mode:"history",base:"/catalog-editor",routes:[{path:"/",component:y.default,name:"datasets"},{path:"/login",component:v.default,name:"login"},{path:"/reports",component:q.default,name:"reports"},{path:"/dataset/:id?",component:g.default,name:"dataset"},{path:"/dataset/:id/elements",component:_.default,name:"elements"},{path:"/dataset/:id/elements/:eid",component:x.default,name:"element"}]});new n.default({router:Q,el:"#app",template:'\n    <div id="app">\n      <app></app>\n    </div>\n    ',components:{App:f.default}})},,,,,,,function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function r(t){return F.get(t).then(tt).then(G).then(X).then(st).then(function(t){return V(t,R.default)}).then(H).then(W)}function n(t){return F.get(t).then(tt).then(G).then(nt)}function i(t,e){return e.keywords=e.keyword.map(function(t){return"http://data.food.gov.uk/catalog/keyword/"+t}),e=B(e),"new"===t.id?F.save({},e):F.update(t,e)}function o(t){return F.remove(t)}function l(t){return K.get(t).then(tt).then(G).then(X).then(function(t){return V(t,U.default)}).then(rt).then(function(t){return t.distribution=V(t.distribution,q.default),t})}function d(t){return K.get(t).then(tt).then(G).then(nt)}function u(t,e){return e.temporal=e.startDate+"/"+e.endDate,e=B(e),"new"===t.eid?(delete t.eid,K.save(t,e)):K.update(t,e)}function c(t){return K.remove(t)}function p(t){return Y.get(t).then(tt).then(G)}function f(t){return Y.get(t).then(tt).then(G).then(at)}function m(t,e){return Y.save({},e)}function v(){return $.default.http.get(J+"user",{}).then(tt).then(G)}function h(t){return t.rememberMe=!0,$.default.http.post(J+"login",t).then(tt).then(G)}function g(){return $.default.http.post(J+"logout",{}).then(tt).then(G)}function b(){return $.default.http.get(z,{}).then(tt).then(G)}function y(){return $.default.http.get(Q,{}).then(tt).then(G).then(function(t){var e=function t(e,s){if(e.narrower){var r=!0,n=!1,i=void 0;try{for(var o,l=(0,M.default)(e.narrower);!(r=(o=l.next()).done);r=!0){var d=o.value,u=s.concat([e.label]);t(d,u)}}catch(t){n=!0,i=t}finally{try{!r&&l.return&&l.return()}finally{if(n)throw i}}}e.niceName=s.join("/")+"/"+e.label,s.length&&(e.niceName="/"+e.niceName),a.push(e)},a=[],s=!0,r=!1,n=void 0;try{for(var i,o=(0,M.default)(t);!(s=(i=o.next()).done);s=!0){var l=i.value;e(l,[])}}catch(t){r=!0,n=t}finally{try{!s&&o.return&&o.return()}finally{if(r)throw n}}return a.reverse()})}function w(){return $.default.http.get(I,{}).then(tt).then(G)}function _(){return $.default.http.get("/static/api/Datatypes.json",{}).then(tt)}Object.defineProperty(e,"__esModule",{value:!0});var C=a(196),x=s(C),P=a(24),j=s(P),D=a(191),k=s(D),E=a(190),M=s(E);e.getDataset=r,e.getDatasets=n,e.saveDataset=i,e.removeDataset=o,e.getElement=l,e.getElements=d,e.saveElement=u,e.removeElement=c,e.getKeywordsObjects=p,e.getKeywordsText=f,e.saveKeyword=m,e.getLoggedInUser=v,e.login=h,e.logout=g,e.getDirectorates=b,e.getActivities=y,e.getLicences=w,e.getDatatypes=_;var N=a(167),$=s(N),L=a(304),A=s(L),O=a(39),R=s(O),S=a(41),U=s(S),T=a(40),q=s(T);$.default.use(A.default);var F=$.default.resource("/catalog/editor/dataset{/id}",{},{},{headers:{"Content-type":"application/ld+json"}}),K=$.default.resource("/catalog/editor/dataset{/id}/element{/eid}",{},{},{headers:{"Content-type":"application/ld+json"}}),Y=$.default.resource("/catalog/editor/keyword{/id}",{},{},{headers:{"Content-type":"application/ld+json"}}),z="/catalog/data/directorates",Q="/catalog/data/activities",I="/catalog/editor/license/",J="/catalog/system/security/",G=function(t){return t.item?t.item:t.items},B=function(t){for(var e in t)""===t[e]&&delete t[e];return t},V=function t(e,a){return e instanceof Array?e.map(function(e){return t(e,a)}):(0,k.default)(JSON.parse((0,j.default)(a)),e)},H=function(t){return"object"===(0,x.default)(t.directorate)&&(t.directorate=t.directorate["@id"]),t},W=function(t){return t.accrualPeriodicity&&(t.accrualPeriodicity=t.accrualPeriodicity.substring(3,1e4)),t},X=function(t){return"undefined"!=typeof t.length&&1===t.length?t[0]:t},Z=function(t,e){return t[e]&&(t[e]=[].concat(t[e])),t},tt=function(t){return t.json()},et=function(t,e){return t.map(function(t){return t[e]})},at=function(t){return et(t,"prefLabel")},st=function(t){return Z(t,"keyword")},rt=function(t){return Z(t,"distribution")},nt=function(t){return t.reverse()}},,,,,,,,,,,,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(console&&console.log){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];console.log.apply(e),alert("sorry, something went wrong")}},t.exports=e.default},,,,,,,,,,,,,,,,,,,,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={title:"",description:"",element:[],publisher:"http://www.food.gov.uk/#id",license:{"@id":"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",label:"Open Government Licence (v3)"},accrualPeriodicity:"",landingPage:"",directorate:"",published:"",keyword:[],activity:[],keywords:[],ownerName:"",notes:"",type:["http://vocab.epimorphics.com/def/catalog/Dataset"],"@id":""},t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={"@id":"",downloadURL:"",accessURL:"",mediaType:"",type:"http://www.w3.org/ns/dcat#Distribution"},t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={title:"",description:"",startDate:"",endDate:"",temporal:"",distribution:[],type:["http://vocab.epimorphics.com/def/catalog/Element","http://www.w3.org/ns/dcat#Dataset"]},t.exports=e.default},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){n.default.confirm({title:"Unsaved changes",message:"Are you sure you want to cancel?",backdrop:!0,buttons:{confirm:{label:"Yes"},cancel:{label:"No"}},callback:function(e){e&&t()}})},a(197);var r=a(25),n=s(r);t.exports=e.default},function(t,e){"use strict";function a(t){var e,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=[2,3,4,5,7,8,9],r=[0,0,0,0,0,0,0],n=[0,12,4,7,24,60,60],i=/^P((\d+Y)?(\d+M)?(\d+W)?(\d+D)?)?(T(\d+H)?(\d+M)?(\d+S)?)?$/;if(t=t.toUpperCase(),!t)return r;if("string"!=typeof t)return new Error("Invalid iso8601 period string '"+t+"'");if(!i.exec(t))return Error("String '"+t+"' is not a valid ISO8601 period.");e=i.exec(t);for(var o=0;o<s.length;o++){var l=s[o];r[o]=e[l]?+e[l].replace(/[A-Za-z]+/g,""):0}if(a)for(var d=r.length-1;d>0;d--)r[d]>=n[d]&&(r[d-1]=r[d-1]+Math.floor(r[d]/n[d]),r[d]=r[d]%n[d]);return r}Object.defineProperty(e,"__esModule",{value:!0});var s={};s.Period={},s.Period.parse=function(t,e){return a(t,e)},s.Period.parseToTotalSeconds=function(t){for(var e=[31104e3,2592e3,604800,86400,3600,60,1],s=a(t),r=0,n=0;n<s.length;n++)r+=s[n]*e[n];return r},s.Period.isValid=function(t){try{return a(t),!0}catch(t){return!1}},s.Period.parseToString=function(t,e,s,r){var n=["","","","","","",""],i=a(t,r);e||(e=["year","month","week","day","hour","minute","second"]),s||(s=["years","months","weeks","days","hours","minutes","seconds"]);for(var o=0;o<i.length;o++)i[o]>0&&(1===i[o]?n[o]=i[o]+" "+e[o]:n[o]=i[o]+" "+s[o]);return n.join(" ").trim().replace(/[ ]{2,}/g," ")},e.default=s,t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){try{var e=void 0;return t.map.location&&t.map.location[0]&&(e=t.map.location[0].split("/").pop()),t.map.Location&&t.map.Location[0]&&(e=t.map.Location[0].split("/").pop()),e}catch(t){return}},t.exports=e.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={"@id":"",prefLabel:"",type:"http://vocab.epimorphics.com/def/catalog/Keyword"},t.exports=e.default},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(t){var e=n.default.Period.parseToString("P"+t);return"Typically published every "+(e||"...")}};var r=a(43),n=s(r);t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t&&t.length>e?t.substr(0,e)+"...":t},t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={distributionUri:"http://data.food.gov.uk/catalog/distribution/"},t.exports=e.default},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(43),n=s(r);e.default={getMessage:function(t,e){return"incorrect ISO8601 frequency. Every year is 1Y. Every 3 months is 3M. Every 14 days is 14D."},validate:function(t,e){var a=n.default.Period.parseToTotalSeconds("P"+t);return!!a}},t.exports=e.default},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(285),n=s(r),i=a(283),o=s(i);e.default={name:"app",components:{cairnNav:n.default,cairnFooter:o.default}},t.exports=e.default},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(24),n=s(r),i=a(7),o=a(306),l=s(o),d=a(39),u=s(d),c=a(169),p=s(c),f=a(170),m=s(f),v=a(25),h=s(v),g=a(42),b=s(g),y=a(19),w=s(y),_=a(44),C=s(_);e.default={created:function(){this.fetchData()},watch:{$route:function(){this.$route.query.saved&&(this.successMsg="Added Successfully",this.unsavedChanges=!1),this.fetchData()},dataset:{deep:!0,handler:function(t,e){t.notation===e.notation&&!this.beforeLoad,this.beforeLoad=!1}}},beforeRouteLeave:function(t,e,a){this.unsavedChanges?(0,b.default)(a):a()},data:function(){return{beforeLoad:!0,dataset:JSON.parse((0,n.default)(u.default)),unsavedChanges:!1,headers:[{title:"title",path:"title"},{title:"description",path:"description"},{title:"fromDate",path:"fromDate"},{title:"toDate",path:"toDate"}],searchQuery:"",directorates:[],activities:[],element:[],allowedKeywords:[],warnMsg:"",successMsg:""}},filters:{iso8601:m.default},methods:{handleTagsChange:function(t,e){var a=this;if(e){if(e=e.toLowerCase(),this.dataset.keyword.indexOf(e)!==-1)return;this.allowedKeywords.indexOf(e)===-1?!function(){var s=a;h.default.confirm("Are you sure you want to add a new global tag?",function(a){if(a){var r=JSON.parse((0,n.default)(p.default));r["@id"]=e,r.prefLabel=e,(0,i.saveKeyword)({},r).then(function(a){s.getKeywords(),s.dataset.keyword.splice(t,0,e)},function(t){(0,w.default)(t)})}else s.dataset.keyword.splice(t,1)})}():this.dataset.keyword.splice(t,0,e)}else this.dataset.keyword.splice(t,1)},removeActivity:function(t){this.dataset.activity.splice(this.dataset.activity.indexOf(t),1)},addActivity:function(t){this.dataset.activity.indexOf(t)===-1&&this.dataset.activity.push(t)},save:function(){var t=this,e=JSON.parse((0,n.default)(this.dataset));e.accrualPeriodicity&&(e.accrualPeriodicity="R/P"+e.accrualPeriodicity.toUpperCase()),(0,i.saveDataset)({id:this.$route.params.id},e).then(function(e){t.unsavedChanges=!1,t.successMsg="Updated Successfully";var a=(0,C.default)(e.headers);a&&t.$router.push({name:"dataset",params:{id:a},query:{saved:!0}})},function(e){t.warnMsg="Something went wrong, please try again",(0,w.default)(e)})},remove:function(){var t=this;h.default.confirm("Are you sure you want to delete this Dataset?",function(e){e&&(0,i.removeDataset)({id:t.$route.params.id}).then(function(e){t.unsavedChanges=!1,t.$router.push({name:"datasets",query:{deleted:!0}})},function(t){(0,w.default)(t)})})},getKeywords:function(){var t=this;return(0,i.getKeywordsText)().then(function(e){t.allowedKeywords=e},function(t){(0,w.default)(t)})},getActivityName:function(t){for(var e in this.activities)if(this.activities[e]["@id"]===t["@id"])return this.activities[e].niceName},fetchData:function(){var t=this;(0,i.getDirectorates)().then(function(e){t.directorates=e}).then((0,i.getActivities)().then(function(e){t.activities=e})).then(this.getKeywords()).then((0,i.getLicences)().then(function(e){t.licences=e},function(t){(0,w.default)(t)})).then(function(){"new"!==t.$route.params.id?((0,i.getDataset)({id:t.$route.params.id}).then(function(e){delete e.keywords,t.dataset=e},function(t){(0,w.default)(t)}),(0,i.getElements)({id:t.$route.params.id}).then(function(e){t.element=e},function(t){(0,w.default)(t)})):t.dataset=JSON.parse((0,n.default)(u.default))})}},components:{"tags-input":l.default}},t.exports=e.default},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(7);e.default={data:function(){return{headers:[{title:"published",path:"published",render:function(t){return t?"yes":"no"}},{title:"notation",path:"@id",addClass:"hidden-xs"},{title:"title",path:"title"},{title:"description",path:"description",addClass:"hidden-xs"}],searchQuery:"",tableData:[],rowsPerPage:10,loading:!0}},created:function(){this.fetchData()},methods:{rowClick:function(t){var e=decodeURIComponent(t["@id"]),a=e.split("/").pop();this.$router.push({name:"dataset",params:{id:a}})},fetchData:function(){var t=this;this.$route.query.deleted&&(this.successMsg="Deleted Successfully"),this.error=this.post=null,this.loading=!0,(0,s.getDatasets)({}).then(function(e){t.tableData=e,t.loading=!1,t.loading=!1},function(t){console.log("couldn't load datasets",t)})},searchListener:function(t){this.searchQuery=t}}},t.exports=e.default},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(7),n=a(19),i=s(n);e.default={data:function(){return{datatypes:[],isAccessURL:!0}},props:{distribution:Object,index:Number},mounted:function(){var t=this;this.isAccessURL=!!this.distribution.accessURL,(0,r.getDatatypes)().then(function(e){t.datatypes=e},function(t){(0,i.default)(t)})},computed:{url:{get:function(){return this.distribution.downloadURL||this.distribution.accessURL},set:function(t){this.isAccessURL?(this.distribution.accessURL=t,this.distribution.downloadURL=null):(this.distribution.downloadURL=t,this.distribution.accessURL=null)}}},watch:{isAccessURL:function(){this.url=this.url}}},t.exports=e.default},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(24),n=s(r),i=a(41),o=s(i),l=a(40),d=s(l),u=a(276),c=s(u),p=a(268),f=s(p),m=a(172),v=s(m),h=a(25),g=s(h),b=a(42),y=s(b),w=a(19),_=s(w),C=a(44),x=s(C),P=a(7);e.default={created:function(){this.fetchData()},components:{distribution:c.default},watch:{$route:"fetchData",element:{deep:!0,handler:function(t,e){this.beforeLoad&&(this.beforeLoad=!1)}}},beforeRouteLeave:function(t,e,a){this.unsavedChanges?(0,y.default)(a):a()},data:function(){return{datatypes:[],unsavedChanges:!1,beforeLoad:!0,successMsg:"",warnMsg:"",element:JSON.parse((0,n.default)(o.default))}},mounted:function(){var t=this;(0,P.getDatatypes)().then(function(e){t.datatypes=e},function(t){(0,_.default)(t)})},methods:{fetchData:function(){var t=this;this.$route.query.saved&&(this.successMsg="Added Successfully",this.unsavedChanges=!1),"new"!==this.$route.params.eid?(0,P.getElement)({id:this.$route.params.id,eid:this.$route.params.eid}).then(function(e){t.element=e},function(t){(0,_.default)(t)}):this.element=JSON.parse((0,n.default)(o.default))},save:function(){var t=this;(0,P.saveElement)({id:this.$route.params.id,eid:this.$route.params.eid},this.element).then(function(e){t.unsavedChanges=!1,t.successMsg="Updated Successfully";var a=(0,x.default)(e.headers);a&&t.$router.push({name:"element",params:{id:t.$route.params.id,eid:a},query:{saved:!0}})},function(t){(0,_.default)(t)})},remove:function(){var t=this;g.default.confirm("Are you sure you want to delete this element?",function(e){e&&(0,P.removeElement)({id:t.$route.params.id,eid:t.$route.params.eid}).then(function(e){t.unsavedChanges=!1,t.$router.push({name:"elements",params:{id:t.$route.params.id},query:{deleted:!0}})},function(t){(0,_.default)(t)})})},newDistribution:function(){var t=JSON.parse((0,n.default)(d.default));t["@id"]=v.default.distributionUri+f.default.v4(),this.element.distribution=[t].concat(this.element.distribution)},removeDistribution:function(t){this.element.distribution.splice(this.element.distribution.indexOf(t),1)}}},t.exports=e.default},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(7),n=a(19),i=s(n),o=a(171),l=s(o);e.default={created:function(){this.fetchData()},watch:{$route:"fetchData"},data:function(){return{rowsPerPage:100,elements:[],dataset:{element:[],keyword:[""]},headers:[{title:"title",path:"title"},{title:"description",path:"description"},{title:"no. distributions",path:"distribution",render:function(t){return t instanceof Array?t.length:1}},{title:"startDate",path:"startDate",addClass:"hidden-xs"},{title:"endDate",path:"endDate",addClass:"hidden-xs"}],searchQuery:"",loading:!0}},methods:{searchListener:function(t){this.searchQuery=t},addElement:function(){this.$router.push({name:"element",params:{id:this.$route.params.id,eid:"new"}})},openElement:function(t){var e=decodeURIComponent(t["@id"]),a=e.split("/").pop();this.$router.push({name:"element",params:{id:this.$route.params.id,eid:a}})},fetchData:function(){var t=this;this.$route.query.deleted&&(this.successMsg="Deleted Successfully"),this.loading=!0,(0,r.getElements)({id:this.$route.params.id}).then(function(e){t.elements=e,t.loading=!1},function(t){(0,i.default)(t)}),(0,r.getDataset)({id:this.$route.params.id}).then(function(e){t.dataset=e},function(t){(0,i.default)(t)})}},filters:{strLimit:l.default}},t.exports=e.default},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(7);e.default={created:function(){this.fetchData()},watch:{$route:"fetchData"},beforeRouteLeave:function(t,e,a){},data:function(){return{username:"",password:"",successMsg:"",warnMsg:""}},filters:{},methods:{login:function(){var t=this;console.log("logging in"),(0,s.login)({userid:this.username,password:this.password}).then(function(t){t?this.$router.push({name:"datasets"}):this.warnMsg="Sorry, couldn't log in with those details"},function(e){t.warnMsg="Sorry, couldn't log in with those details"})},fetchData:function(){var t=this;(0,s.getLoggedInUser)().then(function(e){e&&t.$router.push({name:"datasets"})},function(t){})}},components:{}},t.exports=e.default},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(7),n=a(265),i=s(n);e.default={data:function(){return{pubGraph:{title:{text:"Published vs Draft",subtext:"datasets",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["Published","Draft"]},series:[{name:"",type:"pie",radius:"55%",center:["50%","50%"],data:[{value:0,name:"Published"},{value:1,name:"Draft"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},keywordGraph:{title:{text:"Keywords",subtext:"usage",x:"center"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["Usage"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,1]},yAxis:{type:"category",data:["巴西","印尼","美国","印度","中国","世界人口(万)"]},series:[{name:"Usage",type:"bar",data:[18203,23489,29034,104970,131744,630230]}]}}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;(0,r.getDatasets)({}).then(function(e){t.loading=!1,t.processPub(e),t.processkeywords(e)},function(t){console.log("couldn't load datasets",t)})},processPub:function(t){var e=i.default.reduce(t,function(t,e){return t+(e.published?1:0)},0),a=t.length-e;this.updatePub({pub:e,unpub:a})},processkeywords:function(t){for(var e=i.default.reduce(t,function(t,e){return t.concat(e.keyword)},[]),a={},s=0;s<e.length;s++){var r=e[s];a[r]=a[r]?a[r]+1:1}this.updateKeywordData(a,e)},updatePub:function(t){this.$refs.pie.mergeOptions({series:[{data:[{value:t.pub,name:"Published"},{value:t.unpub,name:"Draft"}]}]})},updateKeywordData:function(t,e){var a=i.default.map(t,function(t,e,a){return t});this.$refs.bar.mergeOptions({yAxis:{type:"category",data:e},series:[{name:"Usage",type:"bar",data:a}]})}}},t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{arr:Array}},t.exports=e.default},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(1),n=s(r),i="YYYY/MM/DD";e.default={props:{arr:Array,startProp:String,endProp:String},computed:{firstDate:function(){var t=this;if(!this.arr||!this.arr.length)return"∞";var e=new Date,a=!1;return this.arr.forEach(function(s){var r=(0,n.default)(s[t.startProp],i);r<e&&(e=r,a=!0)}),a?e:"∞"},lastDate:function(){var t=this;if(!this.arr||!this.arr.length)return"∞";var e=new Date("1970-1-1"),a=!1;return this.arr.forEach(function(s){var r=(0,n.default)(s[t.endProp],i);r>e&&(e=r,a=!0)}),a?e:"∞"}}},t.exports=e.default},function(t,e){"use strict"},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{success:String,warn:String}},t.exports=e.default},function(t,e){"use strict"},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{searchEvent:Function,placeholder:String},data:function(){return{searchQuery:""}},watch:{searchQuery:function(t,e){t!==e&&this.searchEvent&&this.searchEvent(this.searchQuery)}}},t.exports=e.default},function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(192),n=s(r),i=a(195),o=s(i);e.default={props:{data:Array,columns:Array,filterKey:String,customEmptyTableText:"",rowsPerPage:Number,isLoading:!1},data:function(){var t={};return this.columns.forEach(function(e){t[e.path]=1}),{sortKey:"",sortOrders:t,currentPage:0}},watch:{filterKey:function(t,e){this.currentPage=0}},computed:{noPages:function(){var t=Math.ceil(this.filteredData.length/this.rowsPerPage);return[].concat((0,o.default)(Array(t).keys()))},emptyTableText:function(){return this.customEmptyTableText?this.customEmptyTableText:"No data to show"},filteredData:function(){var t=this.sortKey,e=this.filterKey&&this.filterKey.toLowerCase(),a=this.sortOrders[t]||1,s=this.data;return e&&(s=s.filter(function(t){return(0,n.default)(t).some(function(a){return String(t[a]).toLowerCase().indexOf(e)>-1})})),t&&(s=s.slice().sort(function(e,s){return e=e[t],s=s[t],(e===s?0:e>s?1:-1)*a})),s},limitedData:function(){return this.filteredData.slice(this.currentPage*this.rowsPerPage,this.rowsPerPage*(this.currentPage+1))}},methods:{sortBy:function(t){this.sortKey=t,this.sortOrders[t]=this.sortOrders[t]*-1},rowEvent:function(t){this.$emit("clickRow",t)},previous:function(t){t.preventDefault(),0!==this.currentPage&&--this.currentPage},next:function(t){t.preventDefault(),this.currentPage+1!==this.noPages.length&&++this.currentPage},goToPage:function(t,e){e.preventDefault(),this.currentPage=t}}},t.exports=e.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,function(t,e,a){function s(t){return a(r(t))}function r(t){return n[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var n={"./af":57,"./af.js":57,"./ar":63,"./ar-dz":58,"./ar-dz.js":58,"./ar-ly":59,"./ar-ly.js":59,"./ar-ma":60,"./ar-ma.js":60,"./ar-sa":61,"./ar-sa.js":61,"./ar-tn":62,"./ar-tn.js":62,"./ar.js":63,"./az":64,"./az.js":64,"./be":65,"./be.js":65,"./bg":66,"./bg.js":66,"./bn":67,"./bn.js":67,"./bo":68,"./bo.js":68,"./br":69,"./br.js":69,"./bs":70,"./bs.js":70,"./ca":71,"./ca.js":71,"./cs":72,"./cs.js":72,"./cv":73,"./cv.js":73,"./cy":74,"./cy.js":74,"./da":75,"./da.js":75,"./de":77,"./de-at":76,"./de-at.js":76,"./de.js":77,"./dv":78,"./dv.js":78,"./el":79,"./el.js":79,"./en-au":80,"./en-au.js":80,"./en-ca":81,"./en-ca.js":81,"./en-gb":82,"./en-gb.js":82,"./en-ie":83,"./en-ie.js":83,"./en-nz":84,"./en-nz.js":84,"./eo":85,"./eo.js":85,"./es":87,"./es-do":86,"./es-do.js":86,"./es.js":87,"./et":88,"./et.js":88,"./eu":89,"./eu.js":89,"./fa":90,"./fa.js":90,"./fi":91,"./fi.js":91,"./fo":92,"./fo.js":92,"./fr":95,"./fr-ca":93,"./fr-ca.js":93,"./fr-ch":94,"./fr-ch.js":94,"./fr.js":95,"./fy":96,"./fy.js":96,"./gd":97,"./gd.js":97,"./gl":98,"./gl.js":98,"./he":99,"./he.js":99,"./hi":100,"./hi.js":100,"./hr":101,"./hr.js":101,"./hu":102,"./hu.js":102,"./hy-am":103,"./hy-am.js":103,"./id":104,"./id.js":104,"./is":105,"./is.js":105,"./it":106,"./it.js":106,"./ja":107,"./ja.js":107,"./jv":108,"./jv.js":108,"./ka":109,"./ka.js":109,"./kk":110,"./kk.js":110,"./km":111,"./km.js":111,"./ko":112,"./ko.js":112,"./ky":113,"./ky.js":113,"./lb":114,"./lb.js":114,"./lo":115,"./lo.js":115,"./lt":116,"./lt.js":116,"./lv":117,"./lv.js":117,"./me":118,"./me.js":118,"./mi":119,"./mi.js":119,"./mk":120,"./mk.js":120,"./ml":121,"./ml.js":121,"./mr":122,"./mr.js":122,"./ms":124,"./ms-my":123,"./ms-my.js":123,"./ms.js":124,"./my":125,"./my.js":125,"./nb":126,"./nb.js":126,"./ne":127,"./ne.js":127,"./nl":129,"./nl-be":128,"./nl-be.js":128,"./nl.js":129,"./nn":130,"./nn.js":130,"./pa-in":131,"./pa-in.js":131,"./pl":132,"./pl.js":132,"./pt":134,"./pt-br":133,"./pt-br.js":133,"./pt.js":134,"./ro":135,"./ro.js":135,"./ru":136,"./ru.js":136,"./se":137,"./se.js":137,"./si":138,"./si.js":138,"./sk":139,"./sk.js":139,"./sl":140,"./sl.js":140,"./sq":141,"./sq.js":141,"./sr":143,"./sr-cyrl":142,"./sr-cyrl.js":142,"./sr.js":143,"./ss":144,"./ss.js":144,"./sv":145,"./sv.js":145,"./sw":146,"./sw.js":146,"./ta":147,"./ta.js":147,"./te":148,"./te.js":148,"./tet":149,"./tet.js":149,"./th":150,"./th.js":150,"./tl-ph":151,"./tl-ph.js":151,"./tlh":152,"./tlh.js":152,"./tr":153,"./tr.js":153,"./tzl":154,"./tzl.js":154,"./tzm":156,"./tzm-latn":155,"./tzm-latn.js":155,"./tzm.js":156,"./uk":157,"./uk.js":157,"./uz":158,"./uz.js":158,"./vi":159,"./vi.js":159,"./x-pseudo":160,"./x-pseudo.js":160,"./yo":161,"./yo.js":161,"./zh-cn":162,"./zh-cn.js":162,"./zh-hk":163,"./zh-hk.js":163,"./zh-tw":164,"./zh-tw.js":164};s.keys=function(){return Object.keys(n)},s.resolve=r,t.exports=s,s.id=266},function(t,e,a){t.exports=a.p+"static/img/epimorphics.31daf71.png"},,,,,,function(t,e,a){a(262);var s=a(2)(a(174),a(300),null,null);t.exports=s.exports},function(t,e,a){a(256);var s=a(2)(a(175),a(294),null,null);t.exports=s.exports},function(t,e,a){a(253);var s=a(2)(a(176),a(291),"data-v-414c8bea",null);t.exports=s.exports},function(t,e,a){a(251);var s=a(2)(a(177),a(289),"data-v-07d3b4d0",null);t.exports=s.exports},function(t,e,a){a(263);var s=a(2)(a(178),a(301),"data-v-df0b77ac",null);t.exports=s.exports},function(t,e,a){a(257);var s=a(2)(a(179),a(295),null,null);t.exports=s.exports},function(t,e,a){a(261);var s=a(2)(a(180),a(299),null,null);t.exports=s.exports},function(t,e,a){a(258);var s=a(2)(a(181),a(296),"data-v-a940a0d0",null);t.exports=s.exports},function(t,e,a){a(255);var s=a(2)(a(182),a(293),"data-v-55fa9ae4",null);t.exports=s.exports},function(t,e,a){a(254);var s=a(2)(a(183),a(292),"data-v-45d50f30",null);t.exports=s.exports},function(t,e,a){a(250);var s=a(2)(a(184),a(288),"data-v-0578390d",null);t.exports=s.exports},function(t,e,a){a(260);var s=a(2)(a(185),a(298),"data-v-bb79d484",null);t.exports=s.exports},function(t,e,a){a(252);var s=a(2)(a(186),a(290),null,null);t.exports=s.exports},function(t,e,a){a(264);var s=a(2)(a(187),a(302),"data-v-f319cacc",null);t.exports=s.exports},function(t,e,a){a(259);var s=a(2)(a(188),a(297),"data-v-bb305d4e",null);t.exports=s.exports},function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c||e;return e("footer",[e("div",{staticClass:"container"},[e("img",{staticClass:"epimorphics-logo",attrs:{src:a(267),alt:"Epimorphics"}})," ",e("div",["\n      Data catalog editor by Epimorphics Ltd, linked-data technology ",e("br"),"\n      For help and support, please contact ",e("a",{attrs:{href:"mailto:support@epimorphics.com"}},["Support"])," ",e("br"),"\n      © "+t._s((new Date).getFullYear())+"\n    "])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c||e;return e("div",{staticClass:"distribution"},[e("div",{staticClass:"closeBtnHolder pull-right"},[e("button",{staticClass:"btn btn-danger",on:{click:function(e){t.$emit("remove",t.distribution)}}},[e("span",{staticClass:"glyphicon glyphicon-remove",attrs:{"aria-hidden":"true"}})])])," ",e("h4",["Distribution"])," ",e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"Elformat"}},["Format"])," ",e("select",{directives:[{name:"validate",rawName:"v-validate"},{name:"model",rawName:"v-model",value:t.distribution.mediaType,expression:"distribution.mediaType"}],staticClass:"form-control",attrs:{id:"Elformat"+t.index,"data-vv-rules":"required","data-vv-as":"format",name:"Elformat"+t.index},on:{change:function(e){t.distribution.mediaType=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e})[0]}}},[t._l(t.datatypes,function(a){return e("option",{domProps:{value:a.code}},["\n        "+t._s(a.name)+"\n      "])})])," ",e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("Elformat"+t.index),expression:"errors.has('Elformat' + index)"}],staticClass:"validation-errors"},[t._s(t.errors.first("Elformat"+t.index))])])," ",e("div",{staticClass:"form-group"},[t._m(0)," ",e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.isAccessURL,expression:"isAccessURL"}],attrs:{type:"radio",name:"published"+t.index,id:"publish"+t.index},domProps:{value:!0,checked:t._q(t.isAccessURL,!0)},on:{change:function(e){t.isAccessURL=!0}}}),"\n      Access URL\n    "])," ",e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.isAccessURL,expression:"isAccessURL"}],attrs:{type:"radio",name:"published"+t.index,id:"publish"+t.index},domProps:{value:!1,checked:t._q(t.isAccessURL,!1)},on:{change:function(e){t.isAccessURL=!1}}}),"\n      Direct Download URL\n    "])," ",e("p",{staticClass:"help-block"},["Direct download URLs are links directly to the data. Access URLs are to a webpage describing the data"])])," ",e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{for:"Eldownload"}},["URL"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"},{name:"validate",rawName:"v-validate"}],staticClass:"form-control",attrs:{type:"text","data-vv-rules":"url","data-vv-as":"url",id:"Eldownload"+t.index,name:"Eldownload"+t.index},domProps:{value:t._s(t.url)},on:{input:function(e){
e.target.composing||(t.url=e.target.value)}}})," ",e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("Eldownload"+t.index),expression:"errors.has('Eldownload' + index)"}],staticClass:"validation-errors"},[t._s(t.errors.first("Eldownload"+t.index))])])])},staticRenderFns:[function(){var t=this,e=t.$createElement;t._self._c||e;return e("div",[e("label",["Type"])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c||e;return e("div",[t._m(0)," ",e("nav",{staticClass:"navbar navbar-default"},[e("div",{staticClass:"container"},[e("div",{staticClass:"navbar-header"},[t._m(1)," ",e("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[e("img",{attrs:{src:"/catalog-editor/static/img/logo.png",alt:"Food Standards Agency",height:"50"}})])])," "," ",e("div",{staticClass:"collapse navbar-collapse",attrs:{id:"bs-example-navbar-collapse-1"}},[e("ul",{staticClass:"nav navbar-nav"},[t._m(2)," ",e("li",[e("router-link",{attrs:{to:"/"}},["Home"])])," ",e("li",[e("router-link",{attrs:{to:"/reports"}},["Reports"])])," "])])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement;t._self._c||e;return e("div",{staticClass:"demo"},[e("h3",[" This is a demo "])," ",e("p",[" data may be erased at any time "])])},function(){var t=this,e=t.$createElement;t._self._c||e;return e("button",{staticClass:"navbar-toggle collapsed",attrs:{type:"button","data-toggle":"collapse","data-target":"#bs-example-navbar-collapse-1","aria-expanded":"false"}},[e("span",{staticClass:"sr-only"},["Toggle navigation"])," ",e("span",{staticClass:"icon-bar"})," ",e("span",{staticClass:"icon-bar"})," ",e("span",{staticClass:"icon-bar"})])},function(){var t=this,e=t.$createElement;t._self._c||e;return e("li",[e("h2",["Dataset catalogue"])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c||e;return e("main",[e("div",{staticClass:"container"},[e("div",{staticClass:"pull-right",staticStyle:{"margin-top":"15px"}},[e("router-link",{staticClass:"btn btn-success",attrs:{to:"/dataset/new",title:"add dataset"}},[e("span",{staticClass:"glyphicon glyphicon-plus",attrs:{"aria-hidden":"true"}})])])," ",e("h1",["FSA open data catalogue"])," ",e("p",{staticClass:"text-muted"},["View and update Food Standards Agency open datasets and related assets."])," ",e("search",{attrs:{placeholder:"search datasets",searchEvent:t.searchListener}})," ",e("messages",{attrs:{success:t.successMsg,warn:t.warnMsg}})," ",e("div",{staticClass:"rowsPerPage"},["\n      Items per page:\n      ",e("select",{directives:[{name:"model",rawName:"v-model",value:t.rowsPerPage,expression:"rowsPerPage"}],staticClass:"input input-md",on:{change:function(e){t.rowsPerPage=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e})[0]}}},[e("option",{domProps:{value:10}},["10"])," ",e("option",{domProps:{value:25}},["25"])," ",e("option",{domProps:{value:100}},["100"])," ",e("option",{domProps:{value:1e5}},["All"])])])," ",e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12",attrs:{id:"wrapper"}},[e("grid",{attrs:{data:t.tableData,columns:t.headers,rowsPerPage:t.rowsPerPage,isLoading:t.loading,"filter-key":t.searchQuery},on:{clickRow:t.rowClick}})])])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c||e;return e("div",[e("span",{staticClass:"daterange"},["contains "+t._s(t.arr.length)+" element(s) from "+t._s(t._f("moment")(t.firstDate,"MMMM Do YYYY"))+" - "+t._s(t._f("moment")(t.lastDate,"MMMM Do YYYY"))])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c||e;return e("div",[e("span",{staticClass:"daterange"},["Dataset contains "+t._s(t.arr.length)+" element(s)"])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c||e;return e("main",[e("div",{staticClass:"container"},[e("ol",{staticClass:"breadcrumb"},[e("li",[e("router-link",{staticClass:"active",attrs:{to:{name:"datasets"}}},["Datasets"])])," ",e("li",[t._s(t.$route.params.id)])])])," ",t.dataset?e("div",{key:t.dataset.id,attrs:{id:"details"}},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"pull-right buttons"},["new"!==t.$route.params.id?e("a",{staticClass:"btn btn-danger",on:{click:t.remove}},["Delete"]):t._e()," ",e("router-link",{staticClass:"btn btn-default",attrs:{to:"/",role:"button"}},["Cancel"])," ",e("a",{staticClass:"btn btn-success",on:{click:t.save}},["Save"])," "])])])," ",e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-9 dataset-panel"},[e("form",{on:{submit:function(t){t.preventDefault()}}},[e("messages",{attrs:{success:t.successMsg,warn:t.warnMsg}})," "," ",e("div",{staticClass:"form-group",staticStyle:{clear:"right"}},[e("label",{attrs:{for:"title"}},["Title"])," ",e("input",{directives:[{name:"validate",rawName:"v-validate"},{name:"model",rawName:"v-model",value:t.dataset.title,expression:"dataset.title"}],staticClass:"form-control input-lg",class:{input:!0,"is-danger":t.errors.has("title")},attrs:{type:"text","data-disable-validate-on":"input|change",autocomplete:"off",id:"title",name:"title","data-vv-rules":"required|min:8",placeholder:""},domProps:{value:t._s(t.dataset.title)},on:{input:function(e){e.target.composing||(t.dataset.title=e.target.value)}}})," ",e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("title"),expression:"errors.has('title')"}],staticClass:"validation-errors"},[t._s(t.errors.first("title"))])])," "," ",e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"description"}},["Description"])," ",e("textarea",{directives:[{name:"validate",rawName:"v-validate"},{name:"model",rawName:"v-model",value:t.dataset.description,expression:"dataset.description"}],staticClass:"form-control",attrs:{rows:"6",name:"description",id:"description","data-vv-rules":"required|min:20"},domProps:{value:t._s(t.dataset.description)},on:{input:function(e){e.target.composing||(t.dataset.description=e.target.value)}}})," ",e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("description"),expression:"errors.has('description')"}],staticClass:"validation-errors"},[t._s(t.errors.first("description"))])])," "," ",e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"publisher"}},["Publisher"])," ",e("input",{directives:[{name:"validate",rawName:"v-validate"},{name:"model",rawName:"v-model",value:t.dataset.publisher,expression:"dataset.publisher"}],staticClass:"form-control input-lg",attrs:{type:"text",name:"publisher",id:"publisher","data-vv-rules":"required"},domProps:{value:t._s(t.dataset.publisher)},on:{input:function(e){e.target.composing||(t.dataset.publisher=e.target.value)}}})," ",e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("publisher"),expression:"errors.has('publisher')"}],staticClass:"validation-errors"},[t._s(t.errors.first("publisher"))])])," "," ",e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"licence"}},["Licence"])," ",e("select",{directives:[{name:"model",rawName:"v-model",value:t.dataset.license,expression:"dataset.license"}],staticClass:"form-control input-lg",attrs:{id:"license",name:"license"},on:{change:function(e){t.dataset.license=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e})[0]}}},[t._l(t.licences,function(a){return e("option",{domProps:{value:a}},["\n                      "+t._s(a.label)+"\n                    "])})])])])," ",e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"directorate"}},["Directorate"])," ",e("select",{directives:[{name:"model",rawName:"v-model",value:t.dataset.directorate,expression:"dataset.directorate"}],staticClass:"form-control input-lg",attrs:{id:"directorate",name:"directorate"},on:{change:function(e){t.dataset.directorate=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e})[0]}}},[t._l(t.directorates,function(a){return e("option",{domProps:{value:a["@id"]}},["\n                      "+t._s(a.prefLabel)+"\n                    "])})])])])])," "," ",e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"frequency"}},["Publish Frequency"])," ",e("div",{staticClass:"input-group"},[e("div",{staticClass:"input-group-addon"},["R/P"])," ",e("input",{directives:[{name:"validate",rawName:"v-validate"},{name:"model",rawName:"v-model",value:t.dataset.accrualPeriodicity,expression:"dataset.accrualPeriodicity"}],staticClass:"form-control input-lg",attrs:{type:"text",id:"frequency","data-vv-rules":"iso8601",name:"frequency"},domProps:{value:t._s(t.dataset.accrualPeriodicity)},on:{input:function(e){e.target.composing||(t.dataset.accrualPeriodicity=e.target.value)}}})])," ",e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("frequency"),expression:"errors.has('frequency')"}],staticClass:"validation-errors"},[t._s(t.errors.first("frequency"))])," ",e("span",{directives:[{name:"show",rawName:"v-show",value:!t.errors.has("frequency"),expression:"!errors.has('frequency')"}],staticClass:"iso8601"},[t._s(t._f("iso8601")(t.dataset.accrualPeriodicity))])])," "," ",e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"landing"}},["Landing Page URL"])," ",e("input",{directives:[{name:"validate",rawName:"v-validate"},{name:"model",rawName:"v-model",value:t.dataset.landingPage,expression:"dataset.landingPage"}],staticClass:"form-control input-lg",attrs:{type:"text",id:"landingPage",name:"landingPage","data-vv-rules":"url"},domProps:{value:t._s(t.dataset.landingPage)},on:{input:function(e){e.target.composing||(t.dataset.landingPage=e.target.value)}}})," ",e("p",{staticClass:"help-block"},["A webpage describing the dataset"])," ",e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("landingPage"),expression:"errors.has('landingPage')"}],staticClass:"validation-errors"},[t._s(t.errors.first("landingPage"))])])])," "," ",e("form",{on:{submit:function(t){t.preventDefault()}}},[e("label",["Published"])," ",e("span",{staticClass:"help-block",attrs:{id:"helpBlock"}},["Publish Dataset to the public site. Can take up to 30 mins"])," ",e("div",{staticClass:"radio"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.dataset.published,expression:"dataset.published"}],attrs:{type:"radio",name:"published",id:"publish"},domProps:{value:!0,checked:t._q(t.dataset.published,!0)},on:{change:function(e){t.dataset.published=!0}}}),"\n                Publish\n              "])])," ",e("div",{staticClass:"radio"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.dataset.published,expression:"dataset.published"}],attrs:{type:"radio",name:"published",id:"draft"},domProps:{value:!1,checked:t._q(t.dataset.published,!1)},on:{change:function(e){t.dataset.published=!1}}}),"\n                Draft\n              "])])])," "," ",e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"landing"}},["Issued"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.dataset.issued,expression:"dataset.issued"}],staticClass:"form-control input-lg",attrs:{type:"date",id:"issued",name:"issued"},domProps:{value:t._s(t.dataset.issued)},on:{input:function(e){e.target.composing||(t.dataset.issued=e.target.value)}}})," ",e("p",{staticClass:"help-block"},["The date the dataset was first issued"])])])," "," ",e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"landing"}},["Modified"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.dataset.issued,expression:"dataset.issued"}],staticClass:"form-control input-lg",attrs:{type:"date",id:"modified",name:"modified"},domProps:{value:t._s(t.dataset.issued)},on:{input:function(e){e.target.composing||(t.dataset.issued=e.target.value)}}})," ",e("p",{staticClass:"help-block"},["The date the dataset was last modified"])])])])," ",e("form",{on:{submit:function(t){t.preventDefault()}}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"keyword"}},["Keywords"])," ",e("tags-input",{attrs:{tags:t.dataset.keyword},on:{"tags-change":t.handleTagsChange}})])," "," ",e("div",{staticClass:"form-group"},[e("h4",["Activities"])," ",e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("label",{attrs:{for:"keyword"}},["Selected activities"])," ",e("div",[t._l(t.dataset.activity,function(a){return e("span",{staticClass:"tag"},["\n                      "+t._s(t.getActivityName(a))+"\n                      ",e("span",{staticClass:"hl-click",on:{click:function(e){t.removeActivity(a)}}})])})])])," ",e("div",{staticClass:"col-md-6"},[e("label",{attrs:{for:"keyword"}},["All Activities"])," ",e("div",[t._l(t.activities,function(a){return e("span",{staticClass:"tag activity-add",on:{click:function(e){t.addActivity(a)}}},["\n                      "+t._s(a.niceName)+"\n                    "])})])])])])," "," ",e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"ownerName"}},["Owner details (internal only)"])," ",e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.dataset.ownerName,expression:"dataset.ownerName"}],staticClass:"form-control input-lg",attrs:{id:"ownerName",name:"ownerName",rows:"3"},domProps:{value:t._s(t.dataset.ownerName)},on:{input:function(e){e.target.composing||(t.dataset.ownerName=e.target.value)}}})])," "," ",e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"title"}},["Notes  (internal only)"])," ",e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.dataset.notes,expression:"dataset.notes"}],staticClass:"form-control input-lg",attrs:{rows:"2"},domProps:{value:t._s(t.dataset.notes)},on:{input:function(e){e.target.composing||(t.dataset.notes=e.target.value)}}})])])])," ",e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"form-group assets-group"},[e("h3",["\n              Elements\n            "])," ",e("p",["Elements are versions of a dataset. These are, for example, different years or locations"])," ",e("div",["new"!==t.$route.params.id?[e("arr-length",{attrs:{arr:t.element}})," ",e("router-link",{staticClass:"btn btn-danger",attrs:{to:{name:"elements",params:{id:t.$route.params.id}}}},["Edit elements"])]:[e("p",["Please save Dataset before adding elements"])]," "])])])])])]):e("div",{attrs:{id:"details"}},["\n    Sorry, we can't find that dataset\n  "])," "])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c||e;return e("main",[e("div",{staticClass:"container"},[e("ol",{staticClass:"breadcrumb"},[e("li",[e("router-link",{staticClass:"active",attrs:{to:{name:"datasets"}}},["Datasets"])])," ",e("li",[e("router-link",{staticClass:"active",attrs:{to:{name:"dataset",params:{id:t.$route.params.id,eid:"new"}}}},[t._s(t.$route.params.id)])])," ",e("li",["elements"])])])," ",t.dataset?e("div",{key:t.dataset.id,attrs:{id:"details"}},[e("div",{staticClass:"container"},[e("a",{staticClass:"btn btn-success pull-right",attrs:{title:"add element","aria-label":"Add"},on:{click:t.addElement}},[e("span",{staticClass:"glyphicon glyphicon-plus",attrs:{"aria-hidden":"true"}})])," ",e("h2",[t._s(t._f("strLimit")(t.dataset.title,30))+" / elements"])," ",e("p",["Elements are versions of a dataset split, for example, by area or date."])," ",e("div",{staticClass:"form-group assets-group"},[e("search",{attrs:{placeholder:"search elements",searchEvent:t.searchListener}})," ",e("messages",{attrs:{success:t.successMsg,warn:t.warnMsg}})," ",e("div",{staticClass:"asset-table"},[e("grid",{attrs:{data:t.elements,columns:t.headers,rowsPerPage:t.rowsPerPage,"filter-key":t.searchQuery,isLoading:t.loading,"custom-empty-table-text":"No elements"},on:{clickRow:t.openElement}})])," ",e("div",{staticClass:"rowsPerPage"},["\n          Items per page:\n          ",e("select",{directives:[{name:"model",rawName:"v-model",value:t.rowsPerPage,expression:"rowsPerPage"}],staticClass:"input input-md",on:{change:function(e){t.rowsPerPage=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e})[0]}}},[e("option",{domProps:{value:10}},["10"])," ",e("option",{domProps:{value:25}},["25"])," ",e("option",{domProps:{value:100}},["100"])," ",e("option",{domProps:{value:1e5}},["All"])])])," ",e("date-range",{attrs:{arr:t.elements,startProp:"startDate",endProp:"endDate"}})])])]):e("div",{attrs:{id:"details"}},["\n    Sorry, we can't find that dataset\n  "])," "])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c||e;return e("main",[e("div",{staticClass:"container"},[e("div",{staticClass:"pull-right",staticStyle:{"margin-top":"15px"}})," ",e("h1",["Reports"])," ",e("p",{staticClass:"text-muted"},["One"])," ",e("chart",{ref:"pie",attrs:{options:t.pubGraph}})," ",e("chart",{ref:"bar",attrs:{options:t.keywordGraph}})])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c||e;return e("div",[e("table",{staticClass:"table table-striped table-bordered table-hover"},[e("thead",[e("tr",[t._l(t.columns,function(a){return e("th",{class:[a.addClass,{act:t.sortKey==a.path}],on:{click:function(e){t.sortBy(a.path)}}},["\n        "+t._s(a.title)+"\n        ",e("span",{staticClass:"arrow",class:t.sortOrders[a.path]>0?"asc":"dsc"})])})])])," ",e("tbody",[t._l(t.limitedData,function(a){return e("tr",{staticClass:"grid-row",on:{click:function(e){t.rowEvent(a)}}},[t._l(t.columns,function(s){return e("td",{staticClass:"grid-cell",class:[s.addClass]},[s.render?["\n          "+t._s(s.render(a[s.path]))+"\n        "]:["\n          "+t._s(a[s.path])+"\n        "]," "])})])})," ",t.isLoading?e("tr",[e("td",{staticClass:"text-center noData",attrs:{colspan:t.columns.length}},[e("span",{staticClass:"glyphicon glyphicon-repeat normal-right-spinner"})])]):t._e()," ",t.isLoading||t.data.length?t._e():e("tr",[e("td",{staticClass:"text-center noData",attrs:{colspan:t.columns.length}},["\n        "+t._s(t.emptyTableText)+"\n      "])])])])," ",t.noPages.length>1?e("div",{staticClass:"row"},[e("div",{staticClass:"text-center"},[e("ul",{staticClass:"pagination"},[e("li",{class:{disabled:0===t.currentPage}},[e("a",{attrs:{href:"#"},on:{click:t.previous}},["Previous"])])," ",[t._l(t.noPages,function(a){return e("li",{class:{active:a===t.currentPage}},[e("a",{attrs:{href:"#"},on:{click:function(e){return t.goToPage(a,e)}}},[t._s(a+1)])])})]," ",e("li",{class:{disabled:t.currentPage+1===t.noPages.length}},[e("a",{attrs:{href:"#"},on:{click:t.next}},["Next"])])])])]):t._e()])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c||e;return e("div",{staticClass:"messages"},[t.success?e("div",{staticClass:"message successMsg bg-success"},[t._s(t.success)]):t._e()," ",t.warn?e("div",{staticClass:"message warnMsg bg-danger"},[t._s(t.warn)]):t._e()])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c||e;return e("main",[e("div",{attrs:{id:"login"}},[e("div",{staticClass:"container"},[e("form",{on:{submit:function(t){t.preventDefault()}}},[e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"username"}},["Email"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text"},domProps:{value:t._s(t.username)},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})])," ",e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"username"}},["Password"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password"},domProps:{value:t._s(t.password)},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])," ",e("div",{staticClass:"form-group col-md-6"},[e("button",{on:{click:t.login}},["Login"])])])])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c||e;return e("div",[e("cairnNav")," ",e("router-view",{staticClass:"view"})," ",e("cairnFooter")])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c||e;return e("main",[e("div",{staticClass:"container"},[e("ol",{staticClass:"breadcrumb"},[e("li",[e("router-link",{staticClass:"active",attrs:{to:{name:"datasets"}}},["Datasets"])])," ",e("li",[e("router-link",{staticClass:"active",attrs:{to:{name:"dataset",params:{id:t.$route.params.id,eid:"new"}}}},[t._s(t.$route.params.id)])])," ",e("li",[e("router-link",{staticClass:"active",attrs:{to:{name:"elements",params:{id:t.$route.params.id,eid:"new"}}}},["elements"])])," ",e("li",[t._s(t.$route.params.eid)])])])," ",t.element?e("div",{key:t.element.id,attrs:{id:"details"}},[e("div",{staticClass:"container"},[e("form",{on:{submit:function(t){t.preventDefault()}}},[e("div",{staticClass:"pull-right buttons"},["undefined"!==t.$route.params.eid?e("a",{staticClass:"btn btn-danger",on:{click:t.remove}},["Delete"]):t._e()," ",e("router-link",{staticClass:"btn btn-default",attrs:{to:{name:"elements",params:{id:t.$route.params.id,eid:"new"}}}},["Cancel"])," ",e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.save}},["Save"])," "])," ",e("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},["Element editor"])," ",e("messages",{attrs:{success:t.successMsg,warn:t.warnMsg}})," ",e("div",{staticClass:"form-group",staticStyle:{clear:"left"}},[e("label",{attrs:{for:"Eltitle"}},["Title"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.element.title,expression:"element.title"},{name:"validate",rawName:"v-validate"}],staticClass:"form-control",attrs:{type:"text","data-vv-as":"title",id:"Eltitle","data-vv-rules":"required|min:8",name:"Eltitle"},domProps:{value:t._s(t.element.title)},on:{input:function(e){e.target.composing||(t.element.title=e.target.value)}}})," ",e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("Eltitle"),expression:"errors.has('Eltitle')"}],staticClass:"validation-errors"},[t._s(t.errors.first("Eltitle"))])])," ",e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"Eldescription"}},["Description"])," ",e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.element.description,expression:"element.description"},{name:"validate",rawName:"v-validate"}],staticClass:"form-control",attrs:{"data-vv-as":"description",rows:"5",id:"Eldescription","data-vv-rules":"required|min:6",name:"Eldescription"},domProps:{value:t._s(t.element.description)},on:{input:function(e){e.target.composing||(t.element.description=e.target.value)}}})," ",e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("Eldescription"),expression:"errors.has('Eldescription')"}],staticClass:"validation-errors"},[t._s(t.errors.first("Eldescription"))])])," ",e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"Elstartdate"}},["Start Date"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.element.startDate,expression:"element.startDate"},{name:"validate",rawName:"v-validate"}],staticClass:"form-control",attrs:{type:"date","data-vv-as":"start date","data-vv-rules":"date_format:YYYY-MM-DD",id:"Elstartdate",name:"Elstartdate",placeholder:"dd/mm/yyyy"},domProps:{value:t._s(t.element.startDate)},on:{input:function(e){e.target.composing||(t.element.startDate=e.target.value)}}})," ",e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("Elstartdate"),expression:"errors.has('Elstartdate')"}],staticClass:"validation-errors"},[t._s(t.errors.first("Elstartdate"))])])," ",e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"Elenddate"}},["End Date"])," ",e("input",{directives:[{name:"model",rawName:"v-model",value:t.element.endDate,expression:"element.endDate"},{name:"validate",rawName:"v-validate"}],staticClass:"form-control",attrs:{type:"date","data-vv-as":"end date","data-vv-rules":"date_format:YYYY-MM-DD",id:"Elenddate",name:"Elenddate",placeholder:"dd/mm/yyyy"},domProps:{value:t._s(t.element.endDate)},on:{input:function(e){e.target.composing||(t.element.endDate=e.target.value)}}})," ",e("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("Elenddate"),expression:"errors.has('Elenddate')"}],staticClass:"validation-errors"},[t._s(t.errors.first("Elenddate"))])])])])])," ",e("div",{staticClass:"container distributions"},[e("hr")," ",e("div",{staticClass:"pull-right"},[e("button",{staticClass:"btn btn-success add-distribution",attrs:{title:"add distribution"},on:{click:t.newDistribution}},[e("span",{staticClass:"glyphicon glyphicon-plus",attrs:{"aria-hidden":"true"}})])])," ",e("h3",["Distributions"])," ",e("p",["Distributions are for different file format versions of an element"])," ",t._l(t.element.distribution,function(a,s){return[e("distribution",{attrs:{distribution:a,index:s},on:{remove:t.removeDistribution}})]})])]):t._e()])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c||e;return e("div",{staticClass:"custom-search-input"},[e("div",{staticClass:"input-group col-md-12"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"form-control input",attrs:{type:"text",placeholder:t.placeholder||"search"},domProps:{value:t._s(t.searchQuery)},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}})," ",t._m(0)])])},staticRenderFns:[function(){var t=this,e=t.$createElement;t._self._c||e;return e("span",{staticClass:"input-group-btn"},[e("button",{staticClass:"btn btn-info btn",attrs:{type:"button"}},[e("i",{staticClass:"glyphicon glyphicon-search"})])])}]}}]);
//# sourceMappingURL=app.617e798347f3819c58db.js.map